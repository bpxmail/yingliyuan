<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>拖动点C在直线AB上滑动</title>
    <style>
        canvas {
            border: 1px solid black;
        }
    </style>
</head>

<body>
    <canvas id="myCanvas" width="500" height="400"></canvas>

    <script>
        const canvas = document.getElementById('myCanvas');
        const ctx = canvas.getContext('2d');

        // 定义AB两点
        const A = { x: 100, y: 200 };
        const B = { x: 400, y: 200 };

        // 初始时C点位于A点
        let C = { x: A.x, y: A.y };

        // 绘制直线AB和点C
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height); // 清除画布

            // 绘制直线AB
            ctx.beginPath();
            ctx.moveTo(A.x, A.y);
            ctx.lineTo(B.x, B.y);
            ctx.stroke();

            // 设置蓝色阴影
            ctx.shadowColor = 'navy';
            if (dragging) ctx.shadowBlur = 15;
            else ctx.shadowBlur = 0;

            // 绘制点C
            ctx.beginPath();
            ctx.arc(C.x, C.y, 5, 0, Math.PI * 2); // 画一个小圆表示点C
            ctx.fillStyle = 'red';
            ctx.fill();
            ctx.shadowBlur = 0;
        }

        // 鼠标拖动功能
        let dragging = false;

        canvas.addEventListener('mousedown', (event) => {
            // 检查鼠标是否点击在点C附近
            const dx = event.offsetX - C.x;
            const dy = event.offsetY - C.y;
            if (Math.sqrt(dx * dx + dy * dy) < 10) {
                dragging = true;
            }
        });

        canvas.addEventListener('mousemove', (event) => {
            if (dragging) {
                // 计算点C在AB线段上的位置，确保C点不能超出AB的范围
                let t = (event.offsetX - A.x) / (B.x - A.x);
                t = Math.max(0, Math.min(1, t)); // 限制t的范围在0到1之间
                C.x = A.x + t * (B.x - A.x);
                C.y = A.y + t * (B.y - A.y);
            }
            draw(); // 重绘
        });

        canvas.addEventListener('mouseup', () => {
            dragging = false;
        });

        // 初始化绘制
        draw();
    </script>
</body>

</html>
